schema:
  schema_id: sydbj194362
  name: 声韵调并击(19-4-36-2)
  version: 1.6(20221122)
  author:
    - 张皓哲（576440085@qq.com）
  description:
  dependencies:

switches:
  - name: zh_simp_s2t
    reset: 0
    states: [ 简, 繁 ]
  - name: ascii_punct
    reset: 0
    states: [ 。，, ．， ]
  - name: full_shape
    reset: 0
    states: [ 半, 全 ]
  - name: ascii_mode
    reset: 0
    states: [ 中, 英 ]
  - name: char_hint
    reset: 1
    states: [ 提示关, 提示开 ]

engine:
  processors:
    - ascii_composer
    - recognizer
    - chord_composer
    - speller
    - key_binder
    - punctuator
    - selector
    - navigator
    - express_editor
  segmentors:
    - ascii_segmentor
    - matcher
    - abc_segmentor
    - punct_segmentor
    - fallback_segmentor
  translators:
    - punct_translator
    - table_translator
  filters:
    - simplifier
    - uniquifier
    - simplifier@char_hint

# 简体转繁体
simplifier:
  option_name: zh_simp_s2t
  opencc_config: s2t.json

speller:
  # 当前编码唯一自动上屏
  # 若enable_completion=true，则当前及后续编码唯一上屏（顶功）
  # 启用最大码长或自动上屏模式，则顶功失效
  # 只有选重上屏、最大码长顶上屏、自动上屏模式可以参与自动造词
  # 顶功方案无法自动造词
  auto_select: true
  # 符合格式编码唯一自动上屏，需要较精确匹配，避免第一击恰好只有一个候选上屏
  #auto_select_pattern: "^oo[a-z][a-z][ox]|[a-z][a-z]oo[ox]|[a-z]{4}x|[a-z]{10}$"
  auto_select_pattern: "^[a-z]{5}|[a-z]{10}$"
  # 自动清屏空码，若设置为auto，清屏能力较强，但是需要依靠recognizer:patterns停留合法编码，很麻烦，且在字词库变动的条件下是不可行的
  auto_clear: max_length
  # 最大码长
  max_code_length: 10
  # 进入输入区的字符
  alphabet: 'abcdefghijklmnopqrstuvwxyz'
  # 作为开头的字符，若省略，则与alphabet相同
  #initials: 'abcdefghijklmnopqrstuvwxyz'
  algebra:
    - xform/^pf/pB/
    - xform/^(.....)pf/$1pB/
    - xform/^pv/pA/
    - xform/^(.....)pv/$1pA/
    - xform/^pb/pg/
    - xform/^(.....)pb/$1pg/
    - xform/^(..)fp/$1Bp/
    - xform/^(.......)fp/$1Bp/
    - xform/^(..)vp/$1Ap/
    - xform/^(.......)vp/$1Ap/
    - xform/^(..)bp/$1gp/
    - xform/^(.......)bp/$1gp/
    - xlit/AB/fv/

chord_composer:
  alphabet: 'qazwsxedcrfvtgbyhnujmik,ol.p;/ '
  algebra:
    # 非字母键名转换为大写字母方便处理
    - xlit|;,./ |FDJGO|
    # 用=作键位后缀区分键位和编码
    - xform/([a-zFDJGO])/$1=/
    # 123列
    # 补空码
    - xform/^([^asdqwezxc]=)/o$1/
    # 键位映射
    - xform/s=d=/z/
    - xform/w=e=/m/
    - xform/x=c=/i/
    - xform/a=s=/f/
    - xform/q=w=/r/
    - xform/z=x=/n/
    - xform/x=d=/s/
    - xform/s=e=/c/
    - xform/z=s=/p/
    #- xform/a=d=/s/
    #- xform/q=e=/c/
    #- xform/z=c=/p/
    - xform/d=/g/
    - xform/s=/d/
    - xform/a=/h/
    - xform/e=/u/
    - xform/w=/v
    - xform/q=/l/
    - xform/c=/k/
    - xform/x=/b/
    - xform/z=/t/
    # 45列
    # 补空码
    - xform/^(.)([^rtfgvb]=)/$1o$2/
    - xform/^(.)$/$1o/
    # 键位映射
    - xform/^(..)=/$1/
    # 67列
    # 补空码
    - xform/^(..)([^yuhjnm]=)/$1o$2/
    - xform/^(..)$/$1o/
    # 键位映射
    - xform/u=/r/
    - xform/y=/t/
    - xform/j=/f/
    - xform/h=/g/
    - xform/m=/v/
    - xform/n=/b/
    # 890列
    # 补空码
    - xform/^(...)([^iopklFDJG]=)/$1o$2/
    - xform/^(...)$/$1o/
    # 键位映射
    - xform/k=l=/z/
    - xform/i=o=/m/
    - xform/D=J=/i/
    - xform/l=F=/f/
    - xform/o=p=/r/
    - xform/J=G=/n/
    - xform/k=J=/s/
    - xform/i=l=/c/
    - xform/l=G=/p/
    #- xform/k=F=/s/
    #- xform/i=p=/c/
    #- xform/D=G=/p/
    - xform/k=/g/
    - xform/l=/d/
    - xform/F=/h/
    - xform/i=/u/
    - xform/o=/v/
    - xform/p=/l/
    - xform/D=/k/
    - xform/J=/b/
    - xform/G=/t/
    # 空格
    - xform/^(....)O=$/$1x/
    - xform/^(....)$/$1o/
    - xform/^oooox$/ /
    # 禁止输出非法组合
    # 考虑到字词库变动会影响合法组合种类，不能进行精确禁止，仅限制19*7*7*19种
    - xform/^(oo|go|do|ho|uo|vo|lo|ko|bo|to|zo|mo|io|fo|ro|no|so|co|po|or|gr|dr|hr|ur|vr|lr|kr|br|tr|zr|mr|ir|fr|rr|nr|sr|cr|pr|of|gf|df|hf|uf|vf|lf|kf|bf|tf|zf|mf|if|ff|rf|nf|sf|cf|pf|ov|gv|dv|hv|uv|vv|lv|kv|bv|tv|zv|mv|iv|fv|rv|nv|sv|cv|pv|ot|gt|dt|ht|ut|vt|lt|kt|bt|tt|zt|mt|it|ft|rt|nt|st|ct|pt|og|gg|dg|hg|ug|vg|lg|kg|bg|tg|zg|mg|ig|fg|rg|ng|sg|cg|pg|ob|gb|db|hb|ub|vb|lb|kb|bb|tb|zb|mb|ib|fb|rb|nb|sb|cb|pb)(oo|og|od|oh|ou|ov|ol|ok|ob|ot|oz|om|oi|of|or|on|os|oc|op|ro|rg|rd|rh|ru|rv|rl|rk|rb|rt|rz|rm|ri|rf|rr|rn|rs|rc|rp|fo|fg|fd|fh|fu|fv|fl|fk|fb|ft|fz|fm|fi|ff|fr|fn|fs|fc|fp|vo|vg|vd|vh|vu|vv|vl|vk|vb|vt|vz|vm|vi|vf|vr|vn|vs|vc|vp|to|tg|td|th|tu|tv|tl|tk|tb|tt|tz|tm|ti|tf|tr|tn|ts|tc|tp|go|gg|gd|gh|gu|gv|gl|gk|gb|gt|gz|gm|gi|gf|gr|gn|gs|gc|gp|bo|bg|bd|bh|bu|bv|bl|bk|bb|bt|bz|bm|bi|bf|br|bn|bs|bc|bp)([ox])$/#$1$2$3/
    - erase/^[^#\d ].*//
    - xform/#//
  # 并击过程中套用的式样
  prompt_format:
    # 过程编码不显示
    - xform/.*//

translator:
  dictionary: sydbj194362
  enable_charset_filter: false  # 字符集过滤
  enable_completion: true  # 显示编码未输入完整的词条，如果打开并且是自由顶，部分空码就不能清码，会变成错码顶功
  enable_sentence: false  # 整句模式
  enable_user_dict: true  # 用户词典（用户词典记录动态字词频，用户词）
  enable_encoder: true  # 自动编码
  encode_commit_history: true  # 上屏组词
  max_phrase_length: 10  # 造词长度
  disable_user_dict_for_patterns: # 用户词典无效格式
    - '^[a-z]{5}$'
    - '^[a-z]{5}oo[a-z][a-z][ox]$'
    - '^[a-z]{5}[a-z][a-z]oo[ox]$'
  # 编码区格式
  preedit_format:
  # 提示区格式
  comment_format:
    - xform/.*//

char_hint:
  opencc_config: char_hint.json
  option_name: char_hint
  show_in_comment: true #开启编码滤镜
  comment_format:  #编码滤镜正则处理
    - "xform/<br>/\n/" #编码滤镜内容换行
    - "xform/&nbsp/ /" #编码滤镜内容显示空格
#上述带#号为编码滤镜模式, 普通滤镜直接在行首用#号屏蔽,编码滤镜
  tags:
    - abc
  tips: char #none无注释,char单字注释,all全部注释
    
# 符号
punctuator:
  import_preset: symbols_sydbj

# 功能键、组合键功能
key_binder:
  bindings:
    - { accept: BackSpace, send: Escape, when: composing }
    - { accept: bracketleft, send: Page_Up, when: paging }
    - { accept: bracketright, send: Page_Down, when: has_menu }
    #- { accept: Tab, send: "Shift+Right", when: composing }
    #- { accept: "Shift+Tab", send: "Shift+Left", when: composing }
    #- { accept: "Shift+Shift_R", select: .next, when: always }

# 进入翻译器前的模式判断，符合模式的会进入对应的翻译器
recognizer:
  patterns:
    # 用\引导其他符号
    punct: '^\\([0-9]0?|[A-Za-z*\[\]\{\}\$%#~`\\|/=<>]+)?$'
